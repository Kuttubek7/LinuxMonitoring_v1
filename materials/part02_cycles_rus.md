# Bash-скрипты, часть 2: циклы

Оболочка bash поддерживает циклы for, которые позволяют перебирать последовательность значений. Это основная структура этих циклов:
```shell
for var in list
do
commands
done
```

Самый простой пример цикла for в скриптах bash — это, вероятно, итерация по списку значений:
```shell
for var in first "the second" third "I’ll do it"
do
echo "This is: $var"
done
```

Другой способ инициализировать цикл for — отправить ему список, который является результатом выполнения какой-либо команды, например, вывести содержимое файла:
```shell
file="myfile"
for var in $(cat $file)
do
echo " $var"
done
```

### Разделители полей

В предыдущем примере все элементы списка в файле разделены пробелами, символами табуляции или разрывами строк.

Существует специальная переменная среды, называемая IFS (внутренний разделитель полей), для указания разделителей полей.

По умолчанию оболочка bash считает следующие символы разделителями полей:
- Космос
- Символ табуляции
- символ перевода строки

Если bash видит какой-либо из этих символов в данных, он предполагает, что это следующее независимое значение в списке.

Переменную среды IFS можно временно изменить:
```shell
IFS=$'\n'
IFS=:
```

Теперь вы можете написать скрипт, выводящий содержимое файла построчно:
```shell
file="/etc/passwd"
IFS=$'\n'
for var in $(cat $file)
do
echo " $var"
done
```

Для вложенных циклов можно изменить переменную IFS, и внешний цикл будет продолжать работать с разделителем, установленным до его запуска. Вот как выглядит обработка файла /etc/passwd:
```shell
IFS=$'\n'
for entry in $(cat /etc/passwd)
do
echo "Values in $entry –"
IFS=:
for value in $entry
do
echo " $value"
done
done
```

### Iterating over directory files

Another example of using loops is iterating over directory files:
```shell
for file in /home/likegeeks/*
do
commands
fi
done
```

### Пока циклы

Помимо цикла for, вы также можете использовать цикл while в bash, например:
```shell
var1=5
while [ $var1 -gt 0 ]
do
echo $var1
var1=$[ $var1 - 1 ]
done
```

### Циклы в стиле C

В сценариях bash вы можете использовать циклы for, очень похожие на циклы в стиле C, например:
```shell
for (( i=1; i <= 10; i++ ))
do
echo "number is $i"
done
```

В скриптах bash есть команды break и continue, которые работают точно так же, как их аналоги C. Вы можете использовать их не только в циклах for в стиле C, но и в стандартных циклах for и while.

### Обработка вывода в цикле

Вывод данных в цикле может быть обработан либо перенаправлением вывода, либо передачей его в конвейер. Это делается путем добавления команд обработки вывода после инструкции done.


Например, вы можете записать все, что выводится в цикле, в файл:
```shell
for (( a = 1; a < 10; a++ ))
do
echo "Number is $a"
done > myfile.txt
```

Оболочка создаст файл myfile.txt и перенаправит вывод инструкции for в этот файл.